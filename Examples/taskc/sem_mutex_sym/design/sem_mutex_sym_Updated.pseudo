procedure main:
  shared can_access_count := create_semaphore(1)
  shared count := 0
  shared constant thread_count = read_integer()
  create_threads(thread_count, secondary)
end procedure

procedure secondary:
  // Critical section
  // by definingna critical section, we are saying that only one thread can access it at a time
  // in that way making a symetric procedure for all threads
  wait(can_access_count)
  count := count + 1
  signal(can_access_count)
end procedure